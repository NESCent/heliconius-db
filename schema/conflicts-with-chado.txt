-- add to table organism

ALTER TABLE organism ADD COLUMN "class" character varying(255);
ALTER TABLE organism ADD COLUMN "order" character varying(255);
ALTER TABLE organism ADD COLUMN family character varying(255);
ALTER TABLE organism ADD COLUMN subfamily character varying(255);
ALTER TABLE organism ADD COLUMN subspecies character varying(255);

UPDATE organism SET "class" = '';
UPDATE organism SET "order" = '';
UPDATE organism SET family = '';
UPDATE organism SET subfamily = '';
UPDATE organism SET subspecies = '';
ALTER TABLE organism ALTER COLUMN "class" SET NOT NULL;
ALTER TABLE organism ALTER COLUMN "order" SET NOT NULL;
ALTER TABLE organism ALTER COLUMN family SET NOT NULL;
ALTER TABLE organism ALTER COLUMN subfamily SET NOT NULL;
ALTER TABLE organism ALTER COLUMN subspecies SET NOT NULL;

COMMENT ON COLUMN organism.subspecies IS 'Subspecies, variety, forma, etc.';

-- ALTER TABLE organism DROP CONSTRAINT organism_c1;
-- ALTER TABLE organism DROP CONSTRAINT organism_genus_key;
ALTER TABLE organism
	ADD CONSTRAINT organism_genus_key UNIQUE (genus, species, subfamily, subspecies);

